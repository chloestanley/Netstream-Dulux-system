@model IEnumerable<DULUXFINALPART1.Models.Scan_Image>

@{
    ViewData["Title"] = "Index";
    var highestIds = ViewBag.HighestIds as List<int>;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>@ViewData["Title"]</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>

    <style>
        .checkbox-input {
            width: 20px;
            height: 20px;
            margin-right: 10px;
        }

        .form-check {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .hidden-row {
            display: none;
        }

        .info-box {
            margin: 5px 0;
            padding: 8px;
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .number-label {
            font-weight: bold;
        }
    </style>
</head>
<body>


    <div class="container text-center mt-4">
        <h2 class="mb-3"><i class="fas fa-file-alt"></i> LCN Page</h2>

        <!-- Instructions for the user -->
        <div class="alert alert-info" role="alert">
            <h4 class="alert-heading">Important Instructions:</h4>
            <p>
                Please review the stock details and shipment information carefully before confirming or deleting any records.
                If you're confident that the information is accurate, you can select the checkbox below and click "Confirm" to proceed.
                If you wish to cancel or delete a record, click the "Cancel" button next to the relevant record.
            </p>
            <hr>
            <p class="mb-0">
                <strong>Note:</strong> Once you confirm the action, it cannot be undone. Make sure you have reviewed the information thoroughly.
            </p>
        </div>

        <form asp-action="UpdateSelected" method="post">
            <div class="table-responsive">
                <table class="table table-bordered table-hover">
                    <thead class="table-dark">
                        <tr>
                            <th>Details</th>
                            <th>Shipment No</th>

                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model)
                        {
                            var rowClass = highestIds.Contains(item.Id) ? "" : "hidden-row";
                            <tr class="@rowClass">
                                <td class="text-start">
                                    <div class="info-box">
                                        @if (!string.IsNullOrEmpty(item.DeliveryNo1))
                                        {
                                            <div><span class="number-label">Delivery No 1:</span> @item.DeliveryNo1</div>
                                        }
                                        @if (!string.IsNullOrEmpty(item.DeliveryNo2))
                                        {
                                            <div><span class="number-label">Delivery No 2:</span> @item.DeliveryNo2</div>
                                        }
                                        @if (!string.IsNullOrEmpty(item.DeliveryNo3))
                                        {
                                            <div><span class="number-label">Delivery No 3:</span> @item.DeliveryNo3</div>
                                        }
                                        @if (!string.IsNullOrEmpty(item.DeliveryNo4))
                                        {
                                            <div><span class="number-label">Delivery No 4:</span> @item.DeliveryNo4</div>
                                        }
                                        @if (!string.IsNullOrEmpty(item.DeliveryNo5))
                                        {
                                            <div><span class="number-label">Delivery No 5:</span> @item.DeliveryNo5</div>
                                        }
                                        @if (!string.IsNullOrEmpty(item.DeliveryNo6))
                                        {
                                            <div><span class="number-label">Delivery No 6:</span> @item.DeliveryNo6</div>
                                        }
                                        @if (!string.IsNullOrEmpty(item.DeliveryNo7))
                                        {
                                            <div><span class="number-label">Delivery No 7:</span> @item.DeliveryNo7</div>
                                        }
                                        @if (!string.IsNullOrEmpty(item.DeliveryNo8))
                                        {
                                            <div><span class="number-label">Delivery No 8:</span> @item.DeliveryNo8</div>
                                        }
                                                                                @if (!string.IsNullOrEmpty(item.DeliveryNo9))
                                        {
                                            <div><span class="number-label">Delivery No 9:</span> @item.DeliveryNo9</div>
                                        }
                                                                                @if (!string.IsNullOrEmpty(item.DeliveryNo10))
                                        {
                                            <div><span class="number-label">Delivery No 10:</span> @item.DeliveryNo10</div>
                                        }
                                                                                @if (!string.IsNullOrEmpty(item.DeliveryNo11))
                                        {
                                            <div><span class="number-label">Delivery No 11:</span> @item.DeliveryNo11</div>
                                        }
                                                                                @if (!string.IsNullOrEmpty(item.DeliveryNo12))
                                        {
                                            <div><span class="number-label">Delivery No 12:</span> @item.DeliveryNo12</div>
                                        }
                                                                                @if (!string.IsNullOrEmpty(item.DeliveryNo13))
                                        {
                                            <div><span class="number-label">Delivery No 13:</span> @item.DeliveryNo13</div>
                                        }
                                                                                @if (!string.IsNullOrEmpty(item.DeliveryNo14))
                                        {
                                            <div><span class="number-label">Delivery No 14:</span> @item.DeliveryNo14</div>
                                        }
                                                                                @if (!string.IsNullOrEmpty(item.DeliveryNo15))
                                        {
                                            <div><span class="number-label">Delivery No 15:</span> @item.DeliveryNo15</div>
                                        }

                                                                                @if (!string.IsNullOrEmpty(item.DeliveryNo16))
                                        {
                                            <div><span class="number-label">Delivery No 16:</span> @item.DeliveryNo16</div>
                                        }
                                        @if (!string.IsNullOrEmpty(item.DeliveryNo17))
                                        {
                                            <div><span class="number-label">Delivery No 17:</span> @item.DeliveryNo17</div>
                                        }
                                                                                @if (!string.IsNullOrEmpty(item.DeliveryNo18))
                                        {
                                            <div><span class="number-label">Delivery No 18:</span> @item.DeliveryNo18</div>
                                        }
                                                                                @if (!string.IsNullOrEmpty(item.DeliveryNo19))
                                        {
                                            <div><span class="number-label">Delivery No 19:</span> @item.DeliveryNo19</div>
                                        }
                                                                                @if (!string.IsNullOrEmpty(item.DeliveryNo20))
                                        {
                                            <div><span class="number-label">Delivery No 20:</span> @item.DeliveryNo20</div>
                                        }
                                                                                @if (!string.IsNullOrEmpty(item.DeliveryNo21))
                                        {
                                            <div><span class="number-label">Delivery No 21:</span> @item.DeliveryNo21</div>
                                        }
                                                                                @if (!string.IsNullOrEmpty(item.DeliveryNo22))
                                        {
                                            <div><span class="number-label">Delivery No 22:</span> @item.DeliveryNo22</div>
                                        }
                                                                                @if (!string.IsNullOrEmpty(item.DeliveryNo23))
                                        {
                                            <div><span class="number-label">Delivery No 23:</span> @item.DeliveryNo23</div>
                                        }
                                        @if (!string.IsNullOrEmpty(item.DeliveryNo24))
                                        {
                                            <div><span class="number-label">Delivery No 24:</span> @item.DeliveryNo24</div>
                                        }
                                        @if (!string.IsNullOrEmpty(item.DeliveryNo25))
                                        {
                                            <div><span class="number-label">Delivery No 25:</span> @item.DeliveryNo25</div>
                                        }

                                        @if (!string.IsNullOrEmpty(item.TotalPC))
                                        {
                                            <div><span class="number-label">Total PC:</span> @item.TotalPC</div>
                                        }

                                        @if (!string.IsNullOrEmpty(item.Carrier))
                                        {
                                            <div><span class="number-label">Carrier:</span> @item.Carrier</div>
                                        }
                                    </div>
                                </td>
                                <td>@(string.IsNullOrEmpty(item.Shipment) ? "No Shipment" : item.Shipment)</td>

                            </tr>
                        }
                    </tbody>
                </table>
            </div>

            <div>
                @foreach (var item in Model.Where(x => highestIds.Contains(x.Id)))
                {
                    <div class="form-check">
                        <input type="checkbox" name="selectedIds" value="@item.Id" @(item.IsSelected ? "checked" : "") class="checkbox-input" />
                        <label class="form-check-label">
                            <strong>I confirm that the stock information provided is accurate</strong>
                        </label>
                    </div>
                }
            </div>

            <div class="mt-3">
                <button type="submit" class="btn btn-success"><i class="fas fa-check"></i> Confirm</button>
                @foreach (var item in Model.Where(x => highestIds.Contains(x.Id)))
                {
                    <td>
                        <a asp-action="Delete" asp-route-id="@item.Id" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this item?');">
                            <i class="fas fa-trash-alt"></i> Cancel
                        </a>
                    </td>
                }
            </div>
        </form>
    </div>
</body>
</html>
